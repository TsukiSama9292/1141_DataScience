╔══════════════════════════════════════════════════════════════════════════╗
║                                                                          ║
║              📊 評估指標體系總覽 (Evaluation Metrics Summary)              ║
║                                                                          ║
╚══════════════════════════════════════════════════════════════════════════╝


🎯 排序品質指標 (Ranking Metrics)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌────────────────────────────────────────────────────────────────────────┐
│ 1. Hit Rate@K (命中率)                                                  │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式: HR@K = (命中樣本數) / (總樣本數)                                │
│                                                                        │
│   範圍: 0.0 ~ 1.0                                                      │
│   目標: 越高越好                                                        │
│   解讀: 0.668 = 66.8% 使用者的目標電影出現在 Top-10 中                  │
│                                                                        │
│   ⭐ 核心指標 - 最直觀的推薦成功率                                      │
└────────────────────────────────────────────────────────────────────────┘


┌────────────────────────────────────────────────────────────────────────┐
│ 2. Precision@K (精確率)                                                 │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式: Precision@K = |相關項目 ∩ Top-K| / K                           │
│                                                                        │
│   範圍: 0.0 ~ 1.0                                                      │
│   目標: 越高越好                                                        │
│   解讀: 0.0668 = 每 10 個推薦中平均有 0.668 個相關                      │
│                                                                        │
│   Leave-One-Out 簡化: Precision = Hit Rate / K                         │
└────────────────────────────────────────────────────────────────────────┘


┌────────────────────────────────────────────────────────────────────────┐
│ 3. Recall@K (召回率)                                                    │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式: Recall@K = |相關項目 ∩ Top-K| / |所有相關項目|                  │
│                                                                        │
│   範圍: 0.0 ~ 1.0                                                      │
│   目標: 越高越好                                                        │
│   解讀: 找回了多少比例的相關項目                                        │
│                                                                        │
│   Leave-One-Out 簡化: Recall = Hit Rate (只有1個相關項目)               │
└────────────────────────────────────────────────────────────────────────┘


┌────────────────────────────────────────────────────────────────────────┐
│ 4. MRR (Mean Reciprocal Rank)                                          │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式: MRR = (1/|U|) × Σ(1/rank_u)                                    │
│                                                                        │
│   範圍: 0.0 ~ 1.0                                                      │
│   目標: 越高越好                                                        │
│   解讀: 0.452 = 第一個相關項目平均在第 1/0.452 ≈ 2.2 位                 │
│                                                                        │
│   排名對應值:                                                           │
│     第1位 → 1.000  (完美)                                              │
│     第2位 → 0.500  (良好)                                              │
│     第3位 → 0.333  (尚可)                                              │
│     第10位 → 0.100 (較差)                                              │
│                                                                        │
│   強調: 「越早命中越好」                                                │
└────────────────────────────────────────────────────────────────────────┘


┌────────────────────────────────────────────────────────────────────────┐
│ 5. NDCG@K (Normalized Discounted Cumulative Gain)                      │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式 (完整): NDCG@K = DCG@K / IDCG@K                                  │
│          DCG@K = Σ(i=1 to K) [2^rel_i - 1] / log₂(i+1)                │
│                                                                        │
│   公式 (Binary): DCG@K = Σ rel_i / log₂(i+1)                           │
│                                                                        │
│   公式 (LOO): NDCG = 1 / log₂(rank + 1)                                │
│                                                                        │
│   範圍: 0.0 ~ 1.0                                                      │
│   目標: 越高越好                                                        │
│   解讀: 0.528 = 排序品質達到理想狀態的 52.8%                            │
│                                                                        │
│   排名對應值:                                                           │
│     第1位 → 1.000  ✨ (完美)                                           │
│     第2位 → 0.631  (很好)                                              │
│     第3位 → 0.500  (良好)                                              │
│     第5位 → 0.387  (尚可)                                              │
│     第10位 → 0.289 (較差)                                              │
│                                                                        │
│   ⭐ 核心指標 - 兼顧相關性與排序位置                                    │
│   業界標準: NDCG > 0.5 為優秀水準                                       │
└────────────────────────────────────────────────────────────────────────┘


📉 預測準確度指標 (Prediction Metrics)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌────────────────────────────────────────────────────────────────────────┐
│ 6. RMSE (Root Mean Squared Error)                                      │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式: RMSE = √[(1/N) × Σ(r_i - r̂_i)²]                               │
│                                                                        │
│   範圍: 0 ~ ∞ (實際 0 ~ 5 星)                                           │
│   目標: 越低越好                                                        │
│   解讀: 0.9753 = 平均預測誤差約 0.98 星                                 │
│                                                                        │
│   特點:                                                                 │
│     • 對大誤差敏感 (平方項放大誤差)                                     │
│     • 單位與原始評分相同                                                │
│     • RMSE < 1.0 為優秀水準                                            │
│                                                                        │
│   ⭐ 核心指標 - Netflix Prize 官方指標                                  │
└────────────────────────────────────────────────────────────────────────┘


┌────────────────────────────────────────────────────────────────────────┐
│ 7. MAE (Mean Absolute Error)                                           │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                                                        │
│   公式: MAE = (1/N) × Σ|r_i - r̂_i|                                    │
│                                                                        │
│   範圍: 0 ~ ∞ (實際 0 ~ 5 星)                                           │
│   目標: 越低越好                                                        │
│   解讀: 0.7612 = 平均預測誤差約 0.76 星                                 │
│                                                                        │
│   特點:                                                                 │
│     • 對異常值不敏感 (絕對值而非平方)                                   │
│     • 更直觀易懂                                                        │
│     • 通常 MAE < RMSE                                                  │
│                                                                        │
│   輔助指標 - 更穩健的誤差估計                                           │
└────────────────────────────────────────────────────────────────────────┘


🔗 指標間的關係
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

嚴格程度: MRR > NDCG > Hit Rate > Precision

    Hit Rate@10  ←→  Recall@10  (在 Leave-One-Out 中相等)
         ↓
    Precision@10 = Hit Rate / K  (推薦純度)
         ↓
    NDCG@10  (考慮排序位置，更嚴格)
         ↓
    MRR  (只關注第一個命中，最嚴格)


📊 實驗20 (最佳配置) 預期結果解讀
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌────────────────────────────────────────────────────────────────────────┐
│ 指標         │ 預期值  │ 解讀                                            │
│──────────────┼─────────┼────────────────────────────────────────────────│
│ Hit Rate@10  │ 0.668   │ ✅ 66.8% 使用者命中，優秀水準                   │
│ NDCG@10      │ 0.528   │ ✅ 排序品質 > 0.5，業界優秀                     │
│ MRR          │ 0.452   │ ✅ 平均第 2.2 位命中，很好                      │
│ Precision@10 │ 0.0668  │ ✅ 每 10 個推薦 0.668 個相關                    │
│ Recall@10    │ 0.668   │ = Hit Rate (LOO 場景)                          │
│──────────────┼─────────┼────────────────────────────────────────────────│
│ RMSE         │ 0.975   │ ✅ < 1.0 星，預測準確度優秀                     │
│ MAE          │ 0.761   │ ✅ 0.76 星誤差，穩健估計                        │
└────────────────────────────────────────────────────────────────────────┘

綜合評價: 
  ✨ 排序品質優秀 (NDCG > 0.5)
  ✨ 預測準確度優秀 (RMSE < 1.0)
  ✨ 命中率高 (Hit Rate > 0.65)
  → 推薦系統達到業界優秀水準


🎓 學術論文中的使用建議
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

必須報告的核心指標:
  1. Hit Rate@10  - 最直觀的成功率
  2. NDCG@10      - 業界標準排序指標
  3. RMSE         - 預測準確度標準

建議報告的輔助指標:
  4. MRR          - 展示首次命中位置
  5. MAE          - 穩健的誤差估計

可選的補充指標:
  6. Precision@10 - 推薦純度
  7. Recall@10    - 覆蓋率 (LOO場景中等於Hit Rate)


🔧 實現細節
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

程式碼位置: src/movie_recommendation/evaluation.py
主要類別: Evaluator
核心方法: evaluate_leave_one_out()

Leave-One-Out 策略:
  1. 選擇使用者評分最高的電影作為目標
  2. 生成 Top-K 推薦列表
  3. 檢查目標是否在列表中、排名位置
  4. 計算預測評分誤差
  5. 聚合所有樣本取平均


📚 詳細文檔
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

完整的數學公式、實現邏輯、示例計算請參閱:
  👉 EVALUATION_METRICS.md (636 行完整文檔)


═══════════════════════════════════════════════════════════════════════════
                   Created: 2026-01-02 | Author: B1143015
═══════════════════════════════════════════════════════════════════════════
